---
export type GameStatus = 'live' | 'alpha' | 'coming-soon';

export interface Props {
  name: string;
  status: GameStatus;
  description: string;
  githubUrl: string | null;
}

const { name, status, description, githubUrl } = Astro.props;

const statusConfig = {
  live: {
    border: 'border-ez-green-500',
    bg: 'bg-ez-green-500/10',
    iconColor: 'text-ez-green-500',
    icon: 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z',
  },
  alpha: {
    border: 'border-ez-yellow-500',
    bg: 'bg-ez-yellow-500/10',
    iconColor: 'text-ez-yellow-500',
    icon: 'M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z',
  },
  'coming-soon': {
    border: 'border-ez-grey-700',
    bg: 'bg-ez-grey-800/50',
    iconColor: 'text-ez-grey-500',
    icon: 'M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10',
  },
};

const config = statusConfig[status];
---

<div class:list={['border-4 p-6', config.border, config.bg]} data-testid="game-card">
	<div class="flex items-center gap-3">
		<svg
			class:list={['h-6 w-6', config.iconColor]}
			fill="none"
			viewBox="0 0 24 24"
			stroke="currentColor"
			stroke-width="1.5"
			aria-hidden="true"
		>
			<path stroke-linecap="round" stroke-linejoin="round" d={config.icon} />
		</svg>
		<span class="font-ui text-lg uppercase tracking-wider text-white">{name}</span>
	</div>
	<p class="mt-2 font-mono text-sm text-ez-grey-400">{description}</p>
	{githubUrl && (
		<a
			href={githubUrl}
			target="_blank"
			rel="noopener noreferrer"
			class="mt-3 inline-flex items-center gap-1.5 font-mono text-xs text-ez-grey-500 hover:text-white"
		>
			<svg class="h-3 w-3" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
				<path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z" />
			</svg>
			Download
			<svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
				<path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
			</svg>
		</a>
	)}
</div>
